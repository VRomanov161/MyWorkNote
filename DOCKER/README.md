# Docker commands

#### $ docker images -просмотреть локальные образы

#### $ docker ps [опции] - просмотреть запущенные контейнеры

#### $ docker search [имя_образа] - поиск образа

#### $ docker pull [имя_образа] - скачать образ

#### $ Create a new image from a container’s changes
```
docker commit [option] [container] [repository[:TAG]]

```

```

отобразить все конейтенры (в т.ч. остановленные)
-a
===============================================
вывести только container id
-q
===============================================


#### создание образа

Образ создается из Dockerfile

```

FROM - указываем базовый образ с которого начинаем сборку (если образа нет локально, он будет скачан)

RUN - указывает на выполнение какой либо команды

CMD - указывает что нужно выполнить когда будет запущен контейнер

ENV [имя] [значнеие] - задать переменное окружение

```
```
docker build [имя образа+опции]

-t тег

```
```
#### exapmple

```

docker buid -t ubuntu:v1 .

```

```

#### запуск контейнера из образа

Контейнер запущен до тех пор, пока работает запущенное приложение в контейнере

$ docker  run [имя образа+опции]

```
указать имя для контейнера

--name

==================================

запустить конейнер в фоне

-d

=================================

запустить контейнер интерактивно (командная строка не отдастся, контейнер будет бежать в 'терминале')

-it

================================
удалить контейнер по завершению (вне зависимости завершена работа корректно или нет)

--rm

================================

Проброс портов

-p port1:port2
где 1 - порт хоста
2 порт внутри контейнера

===============================

Задать переменную

-e [имя_переменной]=[значение]

==============================

монтирование папки к контейнеру

-v [абсолютный_путь_на_хосте]:[абсолютный_путь_внутри_контейнера]

=============================


#### Удаление конейтенеров

```

$ docker rm [names or container id]
```
##### вывесли лог контейнера

```
#docker logs [имя контейнера]
```

## Docker-compose

Docker Compose используется для одновременного управления несколькими контейнерами, входящими в состав приложения

Файл docker-compose.yml. Это файл Docker Compose, который будет содержать инструкции, необходимые для запуска и настройки сервисов.

#### После того, как в docker-compose.yml внесены все необходимые инструкции, проект нужно собрать

```

$ docker-compose build
```

#### Когда проект собран, его необходимо запустить

```

$ docker-compose up
```

#### Данная команда позволяет выполнить команду в выполняющемся контейнере:

```
$ docker-compose exec [service name] [command]

```

#### Эта команда позволяет останавливать контейнеры, созданные командой docker-compose up

```
$ docker-compose down
```
